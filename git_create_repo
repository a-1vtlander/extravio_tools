#!/bin/bash

echo "Testing SSH connection to GitHub..."
output=$(ssh -T git@github.com 2>&1)
if echo "$output" | grep -q "successfully authenticated"; then
    echo "SSH connection successful."
else
    echo "SSH connection failed. Output: $output"
    exit 1
fi

echo "Enter the repository name: "
read REPO_NAME

echo "Enter your GitHub personal access token:"
read -s GITHUB_TOKEN

echo "Creating remote repository on GitHub..."
if curl -X POST -H "Authorization: token $GITHUB_TOKEN" -H "Content-Type: application/json" -d "{\"name\":\"$REPO_NAME\", \"private\": false}" https://api.github.com/user/repos -s -o /dev/null -w "%{http_code}" | grep -q "201"; then
    echo "Remote repository created successfully."
else
    echo "Failed to create remote repository. Exiting."
    exit 1
fi

git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/a-1vtlander/$REPO_NAME.git
git push -u origin main
